{"apiVersion":1,"groups":[{"orgId":1,"name":"Customized Alerts","folder":"Customized Alerts","interval":"1m","rules":[{"uid":"eep3mz1bqve9sd","title":"Alert details","condition":"Threshold","data":[{"refId":"New Alerts","relativeTimeRange":{"from":21600,"to":0},"datasourceUid":"Postgres_UID","model":{"datasource":{"type":"grafana-postgresql-datasource","uid":"Postgres_UID"},"editorMode":"code","format":"table","instant":false,"intervalMs":60000,"maxDataPoints":43200,"range":true,"rawQuery":true,"rawSql":"SELECT count(*) AS \"ALERTS\" \n  FROM alerts \n  WHERE muted IS false \n    AND timestamp \u003e= now() - interval '5 minutes'","refId":"New Alerts","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}},{"refId":"Threshold","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"New Alerts","intervalMs":1000,"maxDataPoints":43200,"refId":"Threshold","type":"threshold"}}],"dashboardUid":"aep3c81dol6gwa","panelId":3,"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"__dashboardUid__":"aep3c81dol6gwa","__panelId__":"3","summary":"WEKA Cluster has new alerts in last 5 minutes."},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}},{"uid":"bep46lt6gdh4we","title":"Status","condition":"C","data":[{"refId":"Weka status","relativeTimeRange":{"from":60,"to":0},"datasourceUid":"Postgres_UID","model":{"datasource":{"type":"grafana-postgresql-datasource","uid":"Postgres_UID"},"editorMode":"code","format":"table","instant":false,"intervalMs":60000,"maxDataPoints":1,"range":true,"rawQuery":true,"rawSql":"SELECT\r\n  CASE COALESCE(analytics-\u003e\u003e'status', 'NO ANALYTICS')\r\n       WHEN 'OK'                  THEN 0\r\n       WHEN 'UNINITIALIZED'       THEN 1\r\n       WHEN 'REDISTRIBUTING'      THEN 2\r\n       WHEN 'REBUILDING'          THEN 3\r\n       WHEN 'PARTIALLY_PROTECTED' THEN 4\r\n       WHEN 'UNPROTECTED'         THEN 5\r\n       WHEN 'UNAVAILABLE'         THEN 6\r\n       ELSE 9\r\n  END AS status_num\r\nFROM clusters\r\nLEFT JOIN flattened_analytics fa ON clusters.id = fa.cluster_id;","refId":"Weka status","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[3],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query","unloadEvaluator":{"params":[1],"type":"lt"}}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"Weka status","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"aep3c81dol6gwa","panelId":7,"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"__dashboardUid__":"aep3c81dol6gwa","__panelId__":"7","summary":"Weka cluster status is in PARTIALLY_PROTECTED or UNPROTECTED or UNAVAILABLE or UNKNOWN state."},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}}]}]}